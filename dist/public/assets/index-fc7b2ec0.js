var Se=Object.defineProperty;var ve=(s,t,n)=>t in s?Se(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var v=(s,t,n)=>(ve(s,typeof t!="symbol"?t+"":t,n),n);import{r as c,u as le,j as e,N as de,a as C,A as Ae,b as De,L as te,T as ke,M as Ie,S as Pe,c as J,D as Re,d as he,G as Ne,C as Me,e as Le,F as se,f as Oe,g as Ge,B as _e,h as Ke,i as Be,k as K,R as q,l as He,P as G,m as W,n as V,I as ne,o as Fe,p as Ue,q as A,s as y,t as F,v as ue,O as $e,w as xe,x as I,y as ze,z as N,E as Ye,H as Ve,Q as U,J as je,K as M,U as L,V as O,W as re,X as P,Y as qe,Z as Je,_ as pe,$ as We,a0 as ae,a1 as Qe,a2 as Xe,a3 as Ze,a4 as et,a5 as oe,a6 as tt,a7 as rt,a8 as B,a9 as st,aa as nt,ab as at}from"./vendor-420d3929.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function ot(s,t){const[n,r]=c.useState(()=>{try{const o=window.localStorage.getItem(s);return o?JSON.parse(o):t}catch(o){return console.error(`Error loading "${s}" from localStorage: `,o),t}});return[n,o=>{try{window.localStorage.setItem(s,JSON.stringify(o)),r(o)}catch(i){console.error(`Error saving "${s}" to localStorage: `,i)}}]}const fe=c.createContext({token:null,login:async()=>{},logout:()=>{}}),it=({children:s})=>{const[t,n]=ot("auth",null),r=le(),a=async l=>{n(l),r("/")},o=()=>{n(null),r("/",{replace:!0})},i=c.useMemo(()=>({token:t,login:a,logout:o}),[t]);return e.jsx(fe.Provider,{value:i,children:s})},b=()=>c.useContext(fe),ge="/assets/logo-bcefc5fa.svg",ct=({expand:s,onChange:t})=>(b(),e.jsx(de,{className:"nav-toggle",children:e.jsx(C,{pullRight:!0,children:e.jsx(C.Item,{onClick:t,style:{width:56,textAlign:"center"},children:s?e.jsx(Ae,{}):e.jsx(De,{})})})})),lt=({to:s,children:t,...n},r)=>e.jsx(te,{ref:r,to:s,...n,children:t}),$=c.forwardRef(lt),dt=()=>e.jsxs(C.Menu,{trigger:"hover",title:"Reports",icon:e.jsx(ke,{}),placement:"rightStart",children:[e.jsx(C.Item,{as:$,to:"/Reports/EftList",children:"Pending EFT"}),e.jsx(C.Item,{as:$,to:"/Reports/EftList",children:"Statement"})]}),ht=()=>e.jsxs(C.Menu,{trigger:"hover",title:"Applications",icon:e.jsx(Ie,{}),placement:"rightStart",children:[e.jsx(C.Item,{as:$,to:"/Reports/EftList",children:"Pending EFT"}),e.jsx(C.Item,{as:$,to:"/Reports/EftList",children:"Statement"})]}),Q={sidenav:{position:"relative",display:"flex",height:"100vh",flexDirection:"column"},logo:{padding:20,display:"flex",alignItems:"center",justifyItems:"center",justifyContent:"center",color:" #fff",whiteSpace:"nowrap"},img:{display:"flex",alignItems:"center",justifyItems:"center",justifyContent:"center",height:30}},ut=({expand:s,setExpand:t,modelHandleOpen:n})=>e.jsxs(Pe,{style:Q.sidenav,width:s?200:56,collapsible:!0,children:[e.jsx(J.Header,{children:e.jsx("div",{style:Q.logo,children:e.jsx("span",{style:{marginLeft:12},children:e.jsx("img",{src:ge,style:Q.img,alt:"Logo"})})})}),e.jsx(J,{expanded:s,defaultOpenKeys:["3"],appearance:"subtle",children:e.jsx(J.Body,{children:e.jsxs(C,{children:[e.jsx(C.Item,{eventKey:"1",as:$,icon:e.jsx(Re,{}),to:"/",active:!0,children:"Home"}),e.jsx(C.Item,{eventKey:"1",icon:e.jsx(he,{}),onClick:n,children:"Search"}),e.jsx(C.Menu,{eventKey:"2",trigger:"hover",title:"Registration",icon:e.jsx(Ne,{}),placement:"rightStart",children:e.jsx(C.Item,{eventKey:"3-1",children:e.jsx(te,{to:"/registration/customer",children:"Customer"})})}),e.jsx(ht,{}),e.jsx(dt,{})]})})}),e.jsx(ct,{expand:s,onChange:()=>t(!s)})]});const me=c.createContext(void 0),xt=({children:s})=>{const[t,n]=c.useState(()=>{const o=localStorage.getItem("theme");return o||"dark"}),a={theme:t,setMode:()=>{const o=t==="light"?"dark":"light";n(o),localStorage.setItem("theme",o)}};return c.useEffect(()=>{const o=i=>{if(i.key==="theme"){const l=i.newValue;n(l)}};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}},[]),e.jsx(me.Provider,{value:a,children:e.jsx(Me,{theme:t,children:s})})},z=()=>{const s=c.useContext(me);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},jt=({notificationCount:s,setOpenNotification:t})=>{const{logout:n}=b(),{theme:r,setMode:a}=z(),o=()=>{n()},i=()=>{t(!0)};return e.jsx(de,{appearance:"subtle",children:e.jsxs(C,{pullRight:!0,children:[e.jsx(C.Item,{onClick:a,children:e.jsx(Le,{"arial-label":"Switch",checked:r!=="light",size:"lg",unCheckedChildren:e.jsx(se,{icon:Oe}),checkedChildren:e.jsx(se,{icon:Ge})})}),e.jsx(C.Item,{onClick:i,children:e.jsx(_e,{content:s,children:e.jsx(Ke,{style:{width:20,height:20}})})}),e.jsx(C.Menu,{title:e.jsx(Be,{circle:!0,src:"https://avatars.githubusercontent.com/u/8225666",alt:"@superman66"}),children:e.jsx(C.Item,{onClick:o,children:"Sign out"})})]})})},H="http://10.140.8.126:3000";class R{constructor(t){v(this,"auth");v(this,"useLogin",async t=>{const n={"Content-Type":"application/json"};try{const r=await K.post(H+"/api/login/auth",t,{headers:n});return{status:r.status,response:r.data}}catch(r){const a=r.response||{status:500,data:"Unknown error"};return{status:a.status,response:a.data}}});v(this,"useApi",async(t="GET",n,r=null)=>{const{token:a}=this.auth;if(console.log("api input: ",t,n,r),!a)throw new Error("No token found");if(!n)throw new Error("No path found");const o={"Content-Type":"application/json",Authorization:"Bearer "+a.token};try{return(await K({method:t,url:H+"/api"+n,data:r,headers:o})).data}catch(i){if(i.response&&i.response.status===401)if(console.log("401 found"),await this.useRefreshToken()){const d={"Content-Type":"application/json",Authorization:"Bearer "+a.token};try{const u=await K({method:t,url:H+"/api"+n,data:r,headers:d});return console.log("api reply: ",u.data),u.data}catch(u){throw console.error("Error in useApi, Path:"+n+" Error: ",u),u}}else throw new Error("Token Error R");else throw console.error("Error in useApi, Path:"+n+" Error: ",i),i}});v(this,"useBlopApi",async(t,n,r="pdf",a=null)=>{if(!this.auth.token)throw new Error("No token found");if(!n)throw new Error("No path found");const o={"Content-Type":`application/${r}`,Authorization:"Bearer "+this.auth.token.token};try{return(await K({method:t,responseType:"blob",url:`${H}/api${n}`,data:a,headers:o})).data}catch(i){if(i.response&&i.response.status===401)try{if(await this.useRefreshToken()){const d={...o,Authorization:"Bearer "+this.auth.token.token};return(await K({method:t,responseType:"blob",url:`${H}/api${n}`,data:a,headers:d})).data}else throw new Error("Token Error R")}catch(l){throw console.error(`Error in useBlopApi, Path: ${n}, Error: ${l}`),l}else throw console.error(`Error in useBlopApi, Path: ${n}, Error: ${i}`),i}});v(this,"useRefreshToken",async()=>{const{token:t,login:n}=this.auth;if(t.token&&t.refreshToken){const r={"Content-Type":"application/json",Authorization:"Bearer "+t.token},a={refreshToken:t.refreshToken};try{const i=(await K.post(H+"/api/login/refreshToken",a,{headers:r})).data.token;return n({token:i,refreshToken:t.refreshToken}),!0}catch(o){throw console.log("Error in useRefreshToken: ",o),o}}else throw this.auth.logout(),new Error("Error in useRefreshToken: No token found. Token: "+t.token+", Refresh token: "+t.refreshToken)});this.auth=t}}const ie=q.forwardRef(({type:s="info",body:t=void 0,...n},r)=>e.jsx(He,{ref:r,...n,type:s,header:s,children:t||e.jsx(G.Paragraph,{style:{width:320},rows:3})})),pt=({open:s,setOpen:t,notificationCount:n,setNotificationCount:r})=>{const[a,o]=c.useState([]),[i,l]=c.useState(Date.now()),d=b(),u=c.useMemo(()=>new R(d),[d]);return c.useEffect(()=>{const w=async()=>{try{const x=await u.useApi("GET","/notification/maturity"),j=x.map(({MPHONE:E,ID:p},D)=>e.jsx(ie,{style:{width:"100%"},type:"info",body:`Account ${E} witch is ${p==="RECURRING"?"Recurring":"Demand"} product have been mature at unknown Date. Please run close process.`},D));o(j),r(x.length)}catch{o([e.jsx(ie,{type:"info"},0)]),r(0)}},h=setInterval(()=>{l(Date.now())},36e5);return w(),()=>clearInterval(h)},[u,i,o,r]),e.jsxs(W,{open:s,onClose:()=>t(!1),children:[e.jsx(W.Header,{children:e.jsx(W.Title,{children:"Notification"})}),a]})},{HeaderCell:ft,Cell:gt,Column:mt}=A,X=[{key:"CUST_ID",label:"Id",fixed:!0,resizable:!0},{key:"STATUS",label:"Status",flexGrow:1},{key:"MPHONE",label:"Account No",resizable:!0},{key:"PMPHONE",label:"Agent",resizable:!0},{key:"NAME",label:"Name",resizable:!0},{key:"FATHER_NAME",label:"Father Name",resizable:!0},{key:"MOTHER_NAME",label:"Mother Name",resizable:!0},{key:"SPOUSE_NAME",label:"Spouse Name",resizable:!0},{key:"NID_NO",label:"Photo ID",resizable:!0},{key:"DOB",label:"Date of Birth"},{key:"CON_MOB",label:"Agent"},{key:"EMAIL",label:"Email",resizable:!0},{key:"REG_DATE",label:"Reg Date"},{key:"REG_STATUS",label:"Reg Status"},{key:"CUST_ID_TYPE",label:"Customer ID Type"}],yt=({modelOpen:s,modelHandleClose:t})=>{const n=b(),r=new R(n),[a,o]=c.useState(void 0),[i,l]=q.useState(X.map(h=>h.key)),d=h=>e.jsx(gt,{...h,style:{padding:4},children:h.dataKey==="CUST_ID"?e.jsx(te,{to:`/customer/${h.rowData.CUST_ID}`,children:h.rowData.CUST_ID}):h.rowData.dataKey}),u=h=>e.jsx(ft,{...h,style:{padding:4}}),w=h=>{const x=h.target.value;r.useApi("POST","/customer/search",{params:x+"%"}).then(j=>{o(j)})};return e.jsxs(V,{backdrop:"static",role:"alertdialog",size:"lg",open:s,onChange:w,onClose:t,children:[e.jsx(V.Header,{children:e.jsx(V.Title,{children:"Search"})}),e.jsxs(V.Body,{children:[e.jsxs(ne,{inside:!0,children:[e.jsx(Fe,{}),e.jsx(ne.Addon,{children:e.jsx(he,{})})]}),a?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(Ue,{data:X,labelKey:"label",valueKey:"key",value:i,onChange:l,cleanable:!1}),e.jsx("hr",{}),e.jsx(A,{virtualized:!0,data:a,children:X.map(h=>{const{key:x,label:j,...E}=h;return c.createElement(mt,{...E,key:x},e.jsx(u,{children:j}),e.jsx(d,{dataKey:x}))})})]}):e.jsx(y,{children:e.jsx(G.Paragraph,{})})]})]})},ye="/assets/haxeriB-90a94755.svg",we="/assets/haxeriL-3c0a3587.svg",wt=({children:s})=>{const{theme:t}=z(),[n,r]=c.useState(!1),[a,o]=c.useState(0),[i,l]=c.useState(!1),[d,u]=c.useState(!1),w=()=>u(!0),h=()=>u(!1);return e.jsx(e.Fragment,{children:e.jsxs(F,{children:[e.jsx(ut,{expand:n,setExpand:r,modelHandleOpen:w}),e.jsx(yt,{modelOpen:d,modelHandleClose:h}),e.jsxs(F,{children:[e.jsx(jt,{notificationCount:a,setOpenNotification:l}),e.jsx(pt,{open:i,setOpen:l,notificationCount:a,setNotificationCount:o}),e.jsx(ue,{children:e.jsx($e,{})}),e.jsxs(xe,{children:[e.jsx("br",{}),e.jsx(y,{children:e.jsxs(I,{justify:"center",align:"middle",children:[e.jsx("p",{style:{marginRight:5},children:"Power by"}),t!="light"?e.jsx("img",{src:we,height:20}):e.jsx("img",{src:ye,height:20}),e.jsx("a",{style:{marginLeft:5},href:"http://www.haxeri.com/",children:"haxeri.com"})]})})]})]})]})})},Ee=({errorMassage:s})=>e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:s?s.toString():"Unknown Error"})]}),Et=({children:s})=>{const{token:t}=b();if(t){if(t.refreshToken!==null&&t.token!==null)return console.log("Auth Valid"),e.jsx(wt,{children:s})}else return console.log("Auth invalid"),e.jsx(ze,{to:"/login",replace:!0});return e.jsx(Ee,{})};function Ct(){const[s,t]=c.useState(""),[n,r]=c.useState(""),[a,o]=c.useState(""),i=b(),{theme:l}=z(),d=new R(i),u=(x,j)=>{j.preventDefault(),(async()=>{try{const p=await d.useLogin({username:s,password:n}),{token:D,refreshToken:T}=p.response;i.login({token:D,refreshToken:T})}catch(p){p.response&&p.response.status===500?(U.error(p.response.data.toString()),o("has-error")):(console.log(p),U.error("Something went wrong. Please try again later."))}})()},w=x=>t(x),h=x=>r(x);return e.jsx("div",{className:"show-fake-browser login-page",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},children:e.jsx(F,{children:e.jsx(ue,{children:e.jsx(I,{justify:"center",children:e.jsx(I.Item,{children:e.jsxs(y,{header:e.jsxs("h3",{children:[e.jsx("img",{src:ge,alt:"Logo",width:"50",height:"40",style:{marginRight:"20px"}}),"Login"]}),bordered:!0,children:[e.jsxs(N,{onSubmit:u,children:[e.jsxs(N.Group,{children:[e.jsx(N.ControlLabel,{children:"Username"}),e.jsx(N.Control,{name:"name",autoComplete:"on",value:s,onChange:w})]}),e.jsxs(N.Group,{children:[e.jsx(N.ControlLabel,{children:"Password"}),e.jsx(N.Control,{name:"password",type:"password",autoComplete:"on",value:n,onChange:h})]}),e.jsx(N.Group,{children:e.jsx(Ye,{children:e.jsx(Ve,{appearance:"primary",type:"submit",children:"Sign in"})})})]}),e.jsx(xe,{children:e.jsx(y,{children:e.jsxs(I,{justify:"center",align:"middle",children:[e.jsx("p",{style:{marginRight:5},children:"Power by"}),l!="light"?e.jsx("img",{src:we,height:20}):e.jsx("img",{src:ye,height:20}),e.jsx("a",{style:{marginLeft:5},href:"http://www.haxeri.com/",children:"haxeri.com"})]})})})]})})})})})})}const bt=()=>{const s=le();return c.useEffect(()=>{const t=setTimeout(()=>{console.log("Navigate to home"),s("/")},500);return()=>clearTimeout(t)},[]),e.jsx(y,{header:"Loading",children:e.jsx(G.Paragraph,{})})},Tt=s=>{const t=[];for(let n=0;n<s;n++){let r="#"+Math.floor(Math.random()*16777215).toString(16);for(;r.length<7;)r+="0";t.push(r)}return t},St=4,vt=({setTotalBalance:s})=>{const t=b(),n=new R(t),{theme:r}=z(),a=r==="light"?"#000000":"#ffffff",[o,i]=c.useState(),[l,d]=c.useState(!1),[u,w]=c.useState(),h=c.useCallback(async()=>{try{const x=await n.useApi("GET","/dashboard/charts/balanceChart"),j=[];let E=0;x.forEach(({BALANCE:D,TYPE:T})=>{E+=D,j.push([T,D])});const p=Tt(j.length+1);s(E),i(p),d(!1),j.unshift(["Type","Balance"]),w(j)}catch(x){console.error("Error retrieving balance chart",x),d(!0)}},[n]);return c.useEffect(()=>{const x=setInterval(()=>{h()},St*60*1e3);return h(),()=>clearInterval(x)},[t.token]),e.jsx("section",{children:l?e.jsx("p",{children:"Error loading data"}):e.jsx(je,{chartType:"PieChart",data:u,options:{backgroundColor:"transparent",colors:o,legend:{textStyle:{color:a}},chartArea:{backgroundColor:{fill:"#FF0000",fillOpacity:.1},left:0,top:0,width:"100%",height:"100%"}}})})},ce=async s=>await s.useApi("GET","/dashboard/charts/TotalDebitCreditCurrent"),At=async s=>await s.useApi("GET","/dashboard/charts/TotalDebitCreditPrevious"),Z=async(s,t,n)=>{try{if(typeof s=="function"){const r=[],a=[];(await s()).forEach(({CR:i,DR:l})=>{r.push(i),a.push(l)}),t(r),n(a)}}catch(r){console.error(`Error fetching ${s}: `,r)}},Dt=()=>{const s=b(),t=new R(s),[n,r]=c.useState([0]),[a,o]=c.useState([0]),[i,l]=c.useState([0]),[d,u]=c.useState([0]);return c.useEffect(()=>{const w=setInterval(async()=>{await Z(()=>ce(t),r,o)},3e4);return(async()=>{await Z(()=>ce(t),r,o),await Z(()=>At(t),l,u)})(),()=>clearInterval(w)},[s.token]),{currentCr:n,currentDr:a,pastCr:i,pastDr:d}},kt=()=>{const{theme:s}=z(),t=s==="light"?"#000000":"#ffffff",n=new Date().getHours(),r=Array.from({length:n-8},(j,E)=>{const p=E+9;if(p<12)return p.toString()+" AM";if(p===12)return"12 PM";if(p<19)return(p-12).toString()+" PM"}).filter(j=>j!==void 0),[a,o]=c.useState([["Hour","Today Credit","Last Credit","Today Debit","Last Debit"],["9 AM",0,0,0,0]]),[i,l]=c.useState(!1),{currentCr:d,currentDr:u,pastCr:w,pastDr:h}=Dt();c.useEffect(()=>{if(d&&u&&w&&h){const j=r.map((E,p)=>[r[p],d[p],w[p],u[p],h[p]]);j.unshift(["Hour","Today Credit","Last Credit","Today Debit","Last Debit"]),o(j),l(!1)}else l(!0)},[d,u]);const x={hAxis:{textStyle:{color:t}},vAxis:{gridlines:{color:t+"80"},textStyle:{color:t},viewWindowMode:"explicit",viewWindow:{min:0}},animation:{duration:1e3,easing:"out",startup:!0},legend:{position:"top",textStyle:{color:t}},backgroundColor:"transparent",chartArea:{right:0,width:"90%",height:"50%"},colors:["#0763CC","#9A60FE","#CD0601","#F49B91"]};return e.jsx("div",{children:i?e.jsx("p",{children:"Loading..."}):e.jsx(je,{chartType:"LineChart",width:"100%",data:a,options:x})})},It=()=>{const s=b(),t=new R(s),[n,r]=c.useState(!0),[a,o]=c.useState(),i=c.useCallback(async()=>{try{const l=await t.useApi("GET","/dashboard/tables/event");r(!1),o(l)}catch(l){return r(!0),console.error("Error retrieving balance chart"+l),e.jsx("div",{children:"Error"})}},[]);return c.useEffect(()=>{const l=setInterval(()=>{i()},78e4);return i(),()=>clearInterval(l)},[]),e.jsx(e.Fragment,{children:n?e.jsx("div",{children:"Error"}):e.jsxs(A,{cellBordered:!0,autoHeight:!0,data:a,children:[e.jsxs(M,{flexGrow:1,children:[e.jsx(L,{children:"Count"}),e.jsx(O,{dataKey:"NO"})]}),e.jsxs(M,{flexGrow:2,children:[e.jsx(L,{children:"Event"}),e.jsx(O,{dataKey:"PARTICULAR"})]}),e.jsxs(M,{flexGrow:2,children:[e.jsx(L,{children:"Amount"}),e.jsx(O,{dataKey:"AMT"})]})]})})},Pt=()=>{const s=b(),t=new R(s),[n,r]=c.useState(!0),[a,o]=c.useState(void 0),i=c.useCallback(async()=>{try{const l=await t.useApi("GET","/dashboard/tables/pendingEvent");r(!1),o(l)}catch(l){r(!0),console.error("Error retrieving balance chart"+l)}},[s.token]);return c.useEffect(()=>{const l=setInterval(()=>{i()},24e4);return()=>clearInterval(l)},[]),c.useEffect(()=>{i()},[i]),e.jsx(e.Fragment,{children:n?e.jsx(G.Paragraph,{}):e.jsxs(A,{cellBordered:!0,fillHeight:!0,data:a,children:[e.jsxs(M,{flexGrow:2,children:[e.jsx(L,{children:"Event"}),e.jsx(O,{dataKey:"EVENT"})]}),e.jsxs(M,{flexGrow:2,children:[e.jsx(L,{children:"Status"}),e.jsx(O,{dataKey:"STATUS"})]}),e.jsxs(M,{flexGrow:1,children:[e.jsx(L,{children:"Number"}),e.jsx(O,{dataKey:"TOTAL"})]}),e.jsxs(M,{flexGrow:1,children:[e.jsx(L,{children:"Amount"}),e.jsx(O,{dataKey:"AMT"})]})]})})},ee=s=>e.jsx(y,{...s,header:"Card title",children:e.jsx(G.Paragraph,{})}),Rt=({totalBalance:s})=>e.jsxs(re,{children:[e.jsxs(P,{sm:6,children:[e.jsx(y,{header:"Total Balance",children:e.jsxs("h4",{children:[" ",s?s.toFixed(2):"NAN"," BDT"]})}),e.jsx("br",{}),e.jsx(ee,{})]}),e.jsxs(P,{sm:6,children:[e.jsx(ee,{}),e.jsx("br",{}),e.jsx(ee,{})]}),e.jsx(P,{sm:12,children:e.jsx(y,{header:"Transaction Chart",bodyFill:!0,children:e.jsx(kt,{})})})]}),Nt=({setTotalBalance:s})=>e.jsxs(re,{className:"show-grid",children:[e.jsx(P,{xs:16,children:e.jsx("div",{style:{paddingTop:"2rem"},children:e.jsxs(qe,{accordion:!0,children:[e.jsx(y,{header:"Pending Events",bodyFill:!0,defaultExpanded:!0,children:e.jsx(Pt,{})}),e.jsx(y,{header:"Events",bodyFill:!0,defaultExpanded:!0,children:e.jsx(It,{})})]})})}),e.jsx(P,{xs:8,children:e.jsx(y,{header:"Balance Chart",bodyFill:!0,children:e.jsx(vt,{setTotalBalance:s})})})]}),Mt=()=>{const[s,t]=c.useState(0);return e.jsxs(F,{children:[e.jsx(Rt,{totalBalance:s}),e.jsx("br",{}),e.jsx(Nt,{setTotalBalance:t})]})},Lt=()=>e.jsx(F,{children:e.jsx("div",{style:{padding:"1rem"},children:e.jsx(Mt,{})})}),Ot=async s=>{try{return await s.useApi("GET","/eft/summery")}catch(t){return U("Error"+t),t}},Gt=async s=>{try{return await s.useApi("GET","/eft/list")}catch(t){return U("Error"+t),t}},_t=async s=>{try{return await s.useApi("GET","/eft/return")}catch(t){return U("Error"+t),t}},Kt=async s=>{try{const t=new Date,n=await s.useBlopApi("GET","/eft/report.pdf","pdf"),r=new Blob([n],{type:"application/pdf"}),a=`EFT_Report_${t}.pdf`;return Je.saveAs(r,a),!1}catch(t){return U("Error"+t),!1}},{Column:f,HeaderCell:g,Cell:m}=A,Bt=()=>{const s=b(),t=new R(s),[n,r]=c.useState(),[a,o]=c.useState(),[i,l]=c.useState(),[d,u]=c.useState(!1),w=()=>{(async()=>{u(!0);const x=await Kt(t);u(x)})()};return c.useEffect(()=>{(async()=>{const x=await Ot(t);r(x);const j=await Gt(t);o(j);const E=await _t(t);l(E)})()},[]),e.jsx(F,{children:e.jsxs(y,{header:"List of Electronic Funds Transfer (EFT)",children:[e.jsx(pe,{color:"violet",appearance:"primary",icon:e.jsx(We,{}),size:"lg",onClick:w,loading:d,children:"Download"}),e.jsx(ae,{}),e.jsx(I,{children:e.jsx(I.Item,{colspan:24,children:e.jsx(y,{header:"List",bordered:!0,bodyFill:!0,children:e.jsxs(A,{loading:!a,data:a,virtualized:!0,autoHeight:!0,children:[e.jsxs(f,{align:"center",fixed:!0,children:[e.jsx(g,{children:"Id"}),e.jsx(m,{dataKey:"index"})]}),e.jsxs(f,{flexGrow:2,fixed:!0,children:[e.jsx(g,{children:"Account No"}),e.jsx(m,{dataKey:"ACTNUM"})]}),e.jsxs(f,{flexGrow:2,children:[e.jsx(g,{children:"Titel"}),e.jsx(m,{dataKey:"ABS_AC_TITEL"})]}),e.jsxs(f,{flexGrow:2,children:[e.jsx(g,{children:"Reciver"}),e.jsx(m,{dataKey:"RECIVER"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Match"}),e.jsx(m,{dataKey:"match"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Sender"}),e.jsx(m,{dataKey:"SENDER"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Orgin Branch"}),e.jsx(m,{dataKey:"ORIG_BRANCH_NAME"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Orgin Bank"}),e.jsx(m,{dataKey:"ORIG_BANK_NAME"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Amount"}),e.jsx(m,{dataKey:"AMOUNT"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Status"}),e.jsx(m,{dataKey:"HONOURED"})]}),e.jsxs(f,{children:[e.jsx(g,{children:"Remarks"}),e.jsx(m,{dataKey:"NOTE"})]})]})})})}),e.jsx(ae,{}),e.jsxs(I,{children:[e.jsx(I.Item,{colspan:8,children:e.jsx("div",{style:{marginRight:"1rem"},children:e.jsx(y,{header:"Summery",bordered:!0,bodyFill:!0,children:e.jsxs(A,{loading:!n,data:n,autoHeight:!0,children:[e.jsxs(f,{flexGrow:2,align:"center",children:[e.jsx(g,{children:"Products"}),e.jsx(m,{dataKey:"TYPE"})]}),e.jsxs(f,{flexGrow:1,children:[e.jsx(g,{children:"Total"}),e.jsx(m,{dataKey:"COUNT"})]}),e.jsxs(f,{flexGrow:1,children:[e.jsx(g,{children:"Amount"}),e.jsx(m,{dataKey:"SUM"})]}),e.jsxs(f,{flexGrow:1,children:[e.jsx(g,{children:"Status"}),e.jsx(m,{dataKey:"HONOURED"})]})]})})})}),e.jsx(I.Item,{colspan:16,children:e.jsx(y,{header:"Return",bordered:!0,bodyFill:!0,children:e.jsxs(A,{loading:!i,data:i,autoHeight:!0,virtualized:!0,children:[e.jsxs(f,{width:70,align:"center",fixed:!0,children:[e.jsx(g,{children:"Id"}),e.jsx(m,{dataKey:"id"})]}),e.jsxs(f,{width:200,fixed:!0,children:[e.jsx(g,{children:"Account No"}),e.jsx(m,{dataKey:"name"})]}),e.jsxs(f,{width:200,children:[e.jsx(g,{children:"Reciver"}),e.jsx(m,{dataKey:"city"})]}),e.jsxs(f,{width:300,children:[e.jsx(g,{children:"Titel"}),e.jsx(m,{dataKey:"email"})]}),e.jsxs(f,{width:300,children:[e.jsx(g,{children:"Origin"}),e.jsx(m,{dataKey:"email"})]}),e.jsxs(f,{width:300,children:[e.jsx(g,{children:"Amount"}),e.jsx(m,{dataKey:"email"})]}),e.jsxs(f,{width:300,children:[e.jsx(g,{children:"Status"}),e.jsx(m,{dataKey:"email"})]})]})})})]})]})})};class Ht{constructor(t){v(this,"api");v(this,"fatchCustomerData",async(t,n)=>{try{const r=await this.api.useApi("POST","/customer/search",{params:n});return t(r[0]),r[0]}catch(r){throw new Error(r)}});v(this,"fetchProfilePicture",async(t,n)=>{try{const r=await this.api.useApi("POST","/customer/getImage",{params:n});if(!r[0].IMG){console.log("No image found");return}const o=`data:image/jpeg;base64,${r[0].IMG}`;t(o)}catch(r){throw new Error("Error fetching  profile picture. Error: ",r)}});v(this,"fetchImgData",async t=>{try{const n=[],r=await this.api.useApi("POST","/customer/getImageData",{params:t});if(Array.isArray(r))r.forEach(({SL_NO:a,IMG:o,IMAGE_TYPE_ID:i})=>{try{const d=`data:image/jpeg;base64,${o}`;n.push({sl:a,type:i,img:d})}catch(l){throw new Error("Error fetching  pictures Error: ",l)}});else if(r&&typeof r=="object")try{const o=`data:image/jpeg;base64,${r.IMG}`;n.push({sl:r.SL_NO,type:r.IMAGE_TYPE_ID,img:o})}catch(a){throw new Error("Error fetching  pictures Error: ",a)}return n}catch(n){console.error(n);return}});v(this,"fatchMiniStatment",async(t,n)=>{try{const r=await this.api.useApi("POST","/trReportRoute/ministatment",{mphone:n});t(r)}catch(r){throw new Error(r)}});this.api=t}}const Ft=()=>{const s=b(),t=new R(s),n=new Ht(t),[r,a]=c.useState(void 0),[o,i]=c.useState(void 0),[l,d]=c.useState(void 0),[u,w]=c.useState([]),[h,x]=c.useState(2),{id:j}=Qe(),{Column:E,HeaderCell:p,Cell:D}=A,T=k=>e.jsx(p,{...k,style:{padding:1}}),_=k=>e.jsx(D,{...k,style:{padding:1}}),Ce=({data:k})=>k?k.length===0?e.jsx("div",{children:"No images found."}):e.jsx(tt,{shape:"bar",autoplay:!0,placement:"left",activeIndex:h,onSelect:S=>{x(S)},children:k.map(({sl:S,type:Y,img:Te})=>e.jsx("img",{src:Te,height:"250"},S))}):e.jsx("div",{children:"No images found."}),be=()=>{a(void 0),d(void 0),i(void 0),w([]),(async()=>{const S=await n.fatchCustomerData(a,j),Y=await n.fetchImgData(S.MPHONE);n.fatchMiniStatment(i,S.MPHONE),n.fetchProfilePicture(d,S.MPHONE),w(Y)})()};return c.useEffect(()=>{a(void 0),d(void 0),i(void 0),w([]),(async()=>{const S=await n.fatchCustomerData(a,j),Y=await n.fetchImgData(S.MPHONE);n.fatchMiniStatment(i,S.MPHONE),n.fetchProfilePicture(d,S.MPHONE),w(Y)})()},[j]),e.jsxs(y,{header:e.jsxs(Xe,{justifyContent:"space-between",children:[e.jsx("h3",{children:j}),e.jsx(pe,{circle:!0,onClick:be,icon:e.jsx(Ze,{}),appearance:"primary"})]}),children:[e.jsx("hr",{}),r?e.jsx(et,{fluid:!0,children:e.jsxs(re,{className:"show-grid",children:[e.jsxs(P,{xs:24,md:12,children:[e.jsxs(y,{bordered:!0,children:[e.jsx(P,{xs:24,md:12,children:e.jsx(y,{header:e.jsx("h5",{style:{color:"cornflowerblue"},children:"Account Information"}),children:e.jsxs("p",{children:["Account No: ",r.MPHONE," ",e.jsx("br",{}),"Agent: ",r.PMPHONE," ",e.jsx("br",{}),"Reg Status: ",r.REG_STATUS==="P"?e.jsx("span",{style:{color:"green"},children:"Active"}):r.REG_STATUS==="R"?e.jsx("span",{style:{color:"red"},children:"Reject"}):r.REG_STATUS==="L"?e.jsx("span",{style:{color:"blue"},children:"Pending"}):e.jsx("span",{children:"Unknown"})," ",e.jsx("br",{}),"Status: ",r.STATUS==="A"?e.jsx("span",{style:{color:"green"},children:"Active"}):r.STATUS==="C"?e.jsx("span",{style:{color:"red"},children:"Close"}):r.STATUS==="F"?e.jsx("span",{style:{color:"blue"},children:"Cold"}):e.jsx("span",{children:"Unknown"})," ",e.jsx("br",{}),"Register Date: ",oe(r.REG_DATE).format("MMMM Do YYYY")," ",e.jsx("br",{})]})})}),e.jsx(P,{xs:24,md:12,children:e.jsx(y,{header:e.jsx("h5",{style:{color:"cornflowerblue"},children:"Account Holder Photo"}),children:l?e.jsx("img",{src:l}):e.jsx(G.Paragraph,{graph:"image"})})})]}),e.jsx("br",{}),e.jsx(y,{bordered:!0,header:e.jsx("h5",{style:{color:"cornflowerblue"},children:"Personal Information"}),children:e.jsxs("p",{children:["Name: ",r.NAME," ",e.jsx("br",{}),"Father Name: ",r.FATHER_NAME," ",e.jsx("br",{}),"Mother name: ",r.MOTHER_NAME," ",e.jsx("br",{}),"Photo ID: ",r.NID_NO," ",e.jsx("br",{}),"Date of Birth: ",oe(r.DOB).format("MMMM Do YYYY")," ",e.jsx("br",{})]})}),e.jsx("br",{}),e.jsx(y,{bordered:!0,header:e.jsx("h5",{style:{color:"cornflowerblue"},children:"Photo"}),children:e.jsx(Ce,{data:u})})]}),e.jsx(P,{xs:24,md:12,xsHidden:!0,children:e.jsx(y,{bordered:!0,header:e.jsx("h5",{style:{color:"cornflowerblue"},children:"Recent Transactions"}),children:e.jsxs(A,{virtualized:!0,height:400,data:o,children:[e.jsxs(E,{flexGrow:1,align:"center",fixed:!0,children:[e.jsx(T,{children:"SL"}),e.jsx(_,{dataKey:"SL"})]}),e.jsxs(E,{flexGrow:1,fixed:!0,children:[e.jsx(T,{children:"Timestamp"}),e.jsx(_,{dataKey:"TRANS_DATE"})]}),e.jsxs(E,{flexGrow:2,children:[e.jsx(T,{children:"No"}),e.jsx(_,{dataKey:"TRANS_NO"})]}),e.jsxs(E,{flexGrow:1,children:[e.jsx(T,{children:"Debit"}),e.jsx(_,{dataKey:"DR_AMT"})]}),e.jsxs(E,{flexGrow:1,children:[e.jsx(T,{children:"Credit"}),e.jsx(_,{dataKey:"CR_AMT"})]}),e.jsxs(E,{flexGrow:1,children:[e.jsx(T,{children:"Balance"}),e.jsx(D,{dataKey:"BALANCE"})]}),e.jsxs(E,{flexGrow:1,children:[e.jsx(T,{children:"Remarks"}),e.jsx(_,{dataKey:"PARTICULAR"})]})]})})})]})}):e.jsx(G.Paragraph,{rows:50,graph:"image"})]})},Ut=()=>e.jsxs(rt,{children:[e.jsxs(B,{path:"/",element:e.jsx(Et,{children:void 0}),children:[e.jsx(B,{path:"/",element:e.jsx(Lt,{})}),e.jsx(B,{path:"/Reports/EftList",element:e.jsx(Bt,{})}),e.jsx(B,{path:"/customer/:id",element:e.jsx(Ft,{})})]}),e.jsx(B,{path:"/loading",element:e.jsx(bt,{})}),e.jsx(B,{path:"/login",element:e.jsx(Ct,{})})]}),$t=()=>e.jsxs(e.Fragment,{children:[e.jsx(st,{position:"top-center",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}),e.jsx(nt,{children:e.jsx(it,{children:e.jsx(xt,{children:e.jsx(Ut,{})})})})]}),zt=({children:s})=>{const[t,n]=c.useState(!1),[r,a]=c.useState();return t?e.jsx(Ee,{errorMassage:r}):e.jsx(q.Fragment,{children:s})};at.createRoot(document.getElementById("root")).render(e.jsx(q.StrictMode,{children:e.jsx(zt,{children:e.jsx($t,{})})}));
